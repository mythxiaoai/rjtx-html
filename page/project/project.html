<div class="p-m">
	<div class="row">
		<div class="col-md-3">
			<div class="panel-body">
				<ul class="xztree" id="ztree1"></ul>
			</div>
		</div>
		<div class="col-md-9">
			<div class="panel-body">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#tab1" data-toggle="tab">关联小区</a></li>
					<li><a href="#tab2" data-toggle="tab">工单文件</a></li>
					<li><a href="#tab3" data-toggle="tab">区域映射关系</a></li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane fade in active" id="tab1">
						<div class="fz14 fw600 m-t">当前项目: <span class="js_project_title">广州项目</span></div>
						<div id="toolbar1" class="btn-group">
							<input type="file" class="js_importAreaInput hide"/>
			                <button type="button" class="btn btn-default js_importArea">
								<i class="iconfont icon-shangchuan"></i> 上传关联小区
							</button>
			                <button type="button" class="btn btn-default">
								<i class="iconfont icon-xiazai"></i> 导出关联小区
							</button>
			                <button type="button" class="btn btn-default">
								<i class="iconfont icon-huhuan"></i> 同步数据
							</button>
						</div>
						<table id="table1"></table>
					</div>
					<div class="tab-pane fade" id="tab2">
						<div class="fz14 fw600 m-t">当前项目: <span class="js_project_title">广州项目</span></div>
						<div id="toolbar2" class="btn-group">
			                <button type="button" class="btn btn-default js_importFile">
								<i class="iconfont icon-shangchuan"></i> 上传工单文件
							</button>
						</div>
						<table id="table2"></table>
					</div>
					<div class="tab-pane fade" id="tab3">
						<div id="toolbar3" class="btn-group">
							<input type="file" class="js_importAreaRelInput hide"/>
			                <button type="button" class="btn btn-default js_importAreaRel">
								<i class="iconfont icon-shangchuan"></i> 上传区域映射关系
							</button>
							<button type="button" class="btn btn-default">
								<i class="iconfont icon-huhuan"></i> 同步数据
							</button>
						</div>
						<table id="table3"></table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	var project={
		init(){
			this.treeInit();
			this.tab1_update();
			this.tab2_update();
			this.tab3_update();
			this.tab1_table();
			this.tab2_table();
			this.tab3_table();
			//this.demoTableInit("#table2");
			//this.demoTableInit("#table3");
		},
		tab1_update(){
			$(".js_importArea").click(function(){
				$(".js_importAreaInput").trigger("click");
			});
			$(".js_importAreaInput").change(function(){
				//上传ajax
				console.log(this.files)
			});
		},
		tab3_update(){
			$(".js_importAreaRel").click(function(){
				$(".js_importAreaRelInput").trigger("click");
			});
			$(".js_importAreaRelInput").change(function(){
				//上传ajax
				console.log(this.files)
			});
		},
		tab2_update(){
			$(".js_importFile").click(()=>{
				rj.modal("上传工单文件",
				"./page/project/importFile.html",
				()=>{
					rj.resetPlug();
				},
				(dom)=>{
					$("#addOrUpdate").validate({
				        rules: {
				            input1: {
				                required: true
				            },
				            file: {
				                required: true
				            },
				        },
				        messages: {
				             file: {
				                required:v_icon+"请选择上传的文件~"
				            }
				        },
				        submitHandler: function () {
				         	//获取form表单数据
							var data= getFromJson($("#addOrUpdate")[0]);
							alert("校验成功:"+JSON.stringify(data))
							/*xa_ajax({
								id:"#addOrUpdate",
							    type:"post",
							    url:
							    data:data,
							    success:function(data){
							    	//关闭
							    	$(".js_importUser").xmodal("hide")
							    	//刷新
							    	$this.list();
							    }
							});*/
				        }
				    });
				});
			});
		},
		tab1_table(){
			rj.table.init({
				id:"#table1",
				toolbar:"#toolbar1",
				data:[
		            {
		                "id": 0,
		                "name": "Item 0阿杜撒打算打算打",
		                "name2": "Item 0阿杜撒打算打算打算大苏打发送发神经打扫打扫打扫打扫打扫法萨达萨达萨法是否打算打算发送到",
		                "price": "$0"
		            },
		            {
		                "id": 1,
		                "name": "Item 1",
		                "price": "$1"
		            },
		            {
		                "id": 2,
		                "name": "Item 2",
		                "price": "$2"
		            },
		            {
		                "id": 3,
		                "name": "Item 3",
		                "price": "$3"
		            },
		            {
		                "id": 4,
		                "name": "Item 4",
		                "price": "$4"
		            },
		            {
		                "id": 5,
		                "name": "Item 5",
		                "price": "$5"
		            }
		        ],
				columns:[{
						field: 'id',
						title: 'id'
					}, {
						field: 'name',
						title: '名称'
					},{
						field: 'name2',
						title: '名称2'
					}, {
						field: 'price',
						title: '价格'
					}],
			});
		},
		tab2_table(){
			rj.table.init({
				id:"#table2",
				toolbar:"#toolbar2",
				pagination:false,//不显示分页
				data:[{
		                "id": 0,
		                "name": "方案库终端",
		                "name2": "2018-08-11",
		                "price": "$0"
		            },
		            {
		                "id": 1,
		                "name": "状态库中端",
		                "name2": "2018-08-12",
		                "price": "$1"
		            },
		            {
		                "id": 2,
		                "name": "状态库低端",
		                "name2": "2018-08-13",
		                "price": "$2"
		            },
		        ],
				columns:[{
						field: 'name',
						title: '类型'
					}, {
						field: 'name2',
						title: '时间'
					},{
						field: 'price',
						title: '文件名称'
					},{
						title: '操作',
						formatter(value,row,index){
							return `
							<a href="javascript:;" class="btn btn-info btn-xs m-r-xs">数据同步</a>
							`
						}
					}],
			});
		},
		tab3_table(){
			rj.table.init({
				id:"#table3",
				toolbar:"#toolbar3",
				pagination:false,//不显示分页
				data:[
		            {
		                "id": 0,
		                "name": "Item 0阿杜撒打算打算打",
		                "name2": "Item 0阿杜撒打算打算打算大苏打发送发神经打扫打扫打扫打扫打扫法萨达萨达萨法是否打算打算发送到",
		                "price": "$0"
		            },
		            {
		                "id": 1,
		                "name": "Item 1",
		                "price": "$1"
		            },
		            {
		                "id": 2,
		                "name": "Item 2",
		                "price": "$2"
		            },
		            {
		                "id": 3,
		                "name": "Item 3",
		                "price": "$3"
		            },
		            {
		                "id": 4,
		                "name": "Item 4",
		                "price": "$4"
		            },
		            {
		                "id": 5,
		                "name": "Item 5",
		                "price": "$5"
		            }
		        ],
				columns:[{
						field: 'id',
						title: 'id'
					}, {
						field: 'name',
						title: '名称'
					},{
						field: 'name2',
						title: '名称2'
					}, {
						field: 'price',
						title: '价格'
					}],
			});
		},
		treeInit(){
			var zNodes =[
		            { id:1, pId:0, name:"pNode 1"},
		            { id:11, pId:1, name:"pNode 1-1"},
		            { id:111, pId:11, name:"sNode 1-1-1"},
		            { id:112, pId:11, name:"sNode 1-1-2"},
		            { id:113, pId:11, name:"sNode 1-1-3"},
		            { id:114, pId:11, name:"sNode 1-1-4"},
		            { id:12, pId:1, name:"pNode 1-2"},
		            { id:121, pId:12, name:"sNode 1-2-1"},
		            { id:122, pId:12, name:"sNode 1-2-2"},
		            { id:123, pId:12, name:"sNode 1-2-3"},
		            { id:124, pId:12, name:"sNode 1-2-4"},
		            { id:13, pId:1, name:"pNode 1-3"},
		            { id:2, pId:0, name:"pNode 2"},
		            { id:21, pId:2, name:"pNode 2-1"},
		            { id:211, pId:21, name:"sNode 2-1-1"},
		            { id:212, pId:21, name:"sNode 2-1-2"},
		            { id:213, pId:21, name:"sNode 2-1-3"},
		            { id:214, pId:21, name:"sNode 2-1-4"},
		            { id:22, pId:2, name:"pNode 2-2"},
		            { id:221, pId:22, name:"sNode 2-2-1"},
		            { id:222, pId:22, name:"sNode 2-2-2"},
		            { id:223, pId:22, name:"sNode 2-2-3"},
		            { id:224, pId:22, name:"sNode 2-2-4"},
		            { id:23, pId:2, name:"pNode 2-3"},
		            { id:231, pId:23, name:"sNode 2-3-1"},
		            { id:232, pId:23, name:"sNode 2-3-2"},
		            { id:233, pId:23, name:"sNode 2-3-3"},
		            { id:234, pId:23, name:"sNode 2-3-4"},
		            { id:3, pId:0, name:"pNode 3"}
		        ];
			rj.ztree("ztree","#ztree1",zNodes,{callback:{
        		onClick:function(event, treeId, treeNode){
        			if(!treeNode.isParent){
        				$(".js_project_title").text(treeNode.name);
        				//treeNode.id
        				//加载两个ajax
        			}
        		}
        	}});
		}
	}
	project.init();
</script>